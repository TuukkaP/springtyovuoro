03:56:55,634 DEBUG Collections:195 - Collection found: [tyovuoro.model.Role.userRoles#3], was: [tyovuoro.model.Role.userRoles#3] (uninitialized)
03:56:55,635 DEBUG AbstractFlushingEventListener:118 - Flushed: 0 insertions, 0 updates, 0 deletions to 3 objects
03:56:55,635 DEBUG AbstractFlushingEventListener:125 - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
03:56:55,637 DEBUG EntityPrinter:114 - Listing entities:
03:56:55,638 DEBUG EntityPrinter:121 - tyovuoro.model.Role{id=2, userRoles=<uninitialized>, role_name=user}
03:56:55,638 DEBUG EntityPrinter:121 - tyovuoro.model.Role{id=1, userRoles=<uninitialized>, role_name=admin}
03:56:55,639 DEBUG EntityPrinter:121 - tyovuoro.model.Role{id=3, userRoles=<uninitialized>, role_name=pharmacy}
03:56:55,640 DEBUG JdbcTransaction:113 - committed JDBC Connection
03:56:55,640 DEBUG JdbcTransaction:126 - re-enabling autocommit
03:56:55,641 DEBUG HibernateTransactionManager:564 - Not closing pre-bound Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#2], EntityKey[tyovuoro.model.Role#1], EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#2], CollectionKey[tyovuoro.model.Role.userRoles#1], CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction
03:56:55,641 DEBUG SessionImpl:566 - Disconnecting session
03:56:55,641 DEBUG LogicalConnectionImpl:232 - Releasing JDBC connection
03:56:55,642 DEBUG LogicalConnectionImpl:250 - Released JDBC connection
03:56:55,642 DEBUG DefaultListableBeanFactory:1498 - Invoking afterPropertiesSet() on bean with name 'admin/users/create'
03:56:55,642 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.security.methodSecurityMetadataSourceAdvisor'
03:56:55,642 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
03:56:55,643 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'admin/users/create'; URL [/WEB-INF/views/admin/users/create.jsp]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:56:55,643 DEBUG JstlView:371 - Added model object 'roleList' of type [java.util.ArrayList] to request in view with name 'admin/users/create'
03:56:55,643 DEBUG JstlView:371 - Added model object 'org.springframework.validation.BindingResult.user' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'admin/users/create'
03:56:55,643 DEBUG JstlView:371 - Added model object 'user' of type [tyovuoro.model.User] to request in view with name 'admin/users/create'
03:56:55,643 DEBUG JstlView:236 - Forwarding to resource [/WEB-INF/views/admin/users/create.jsp] in InternalResourceView 'admin/users/create'
03:56:55,758 DEBUG DispatcherServlet:913 - Successfully completed request
03:56:55,784 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:56:55,790 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:56:55,791 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:56:55,791 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:56:55,792 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:56:55,792 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:56:55,811 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:56:55,811 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:13,178 DEBUG FilterChainProxy:337 - /admin/user/create at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:13,179 DEBUG HttpSessionSecurityContextRepository:158 - Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@bc9529f7: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:13,179 DEBUG FilterChainProxy:337 - /admin/user/create at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:13,179 DEBUG FilterChainProxy:337 - /admin/user/create at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:13,179 DEBUG FilterChainProxy:337 - /admin/user/create at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:13,179 DEBUG FilterChainProxy:337 - /admin/user/create at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:13,179 DEBUG FilterChainProxy:337 - /admin/user/create at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:13,180 DEBUG FilterChainProxy:337 - /admin/user/create at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:13,180 DEBUG AnonymousAuthenticationFilter:107 - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:13,180 DEBUG FilterChainProxy:337 - /admin/user/create at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:13,180 DEBUG FilterChainProxy:337 - /admin/user/create at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:13,180 DEBUG FilterChainProxy:337 - /admin/user/create at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:13,181 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user/create'; against '/login'
03:57:13,181 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user/create'; against '/login-error'
03:57:13,181 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user/create'; against '/logout'
03:57:13,181 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user/create'; against '/resources/**'
03:57:13,182 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /admin/user/create; Attributes: [isAuthenticated()]
03:57:13,182 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,233 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:13,233 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:13,233 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:13,234 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:13,234 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,234 DEBUG FilterChainProxy:323 - /admin/user/create reached end of additional filter chain; proceeding with original chain
03:57:13,235 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:13,235 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:13,235 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:13,244 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing POST request for [/tyovuorosovellus/admin/user/create]
03:57:13,245 DEBUG SessionFlashMapManager:91 - Retrieved FlashMap(s): [[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]]
03:57:13,245 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /admin/user/create
03:57:13,246 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.UserController.adminSaveUser(int,tyovuoro.model.User)]
03:57:13,246 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'userController'
03:57:13,259 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public java.lang.String tyovuoro.controller.UserController.adminSaveUser(int,tyovuoro.model.User); target is of class [tyovuoro.controller.UserController]; Attributes: [[authorize: 'hasRole('ROLE_ADMIN')', filter: 'null', filterTarget: 'null']]
03:57:13,260 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,261 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:13,261 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:13,261 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,262 DEBUG PrePostAnnotationSecurityMetadataSource:98 - @org.springframework.security.access.prepost.PreAuthorize(value=isAuthenticated()) found on specific method: public tyovuoro.model.Role tyovuoro.service.RoleServiceImpl.getRole(int)
03:57:13,262 DEBUG DelegatingMethodSecurityMetadataSource:65 - Caching method [CacheKey[tyovuoro.service.RoleServiceImpl; public abstract tyovuoro.model.Role tyovuoro.service.RoleService.getRole(int)]] with attributes [[authorize: 'isAuthenticated()', filter: 'null', filterTarget: 'null']]
03:57:13,263 DEBUG AnnotationTransactionAttributeSource:106 - Adding transactional method 'getRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
03:57:13,264 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public abstract tyovuoro.model.Role tyovuoro.service.RoleService.getRole(int); target is of class [tyovuoro.service.RoleServiceImpl]; Attributes: [[authorize: 'isAuthenticated()', filter: 'null', filterTarget: 'null']]
03:57:13,283 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,283 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:13,283 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:13,284 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,284 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:13,284 DEBUG HibernateTransactionManager:290 - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:13,284 DEBUG HibernateTransactionManager:365 - Creating new transaction with name [tyovuoro.service.RoleServiceImpl.getRole]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
03:57:13,285 DEBUG HibernateTransactionManager:352 - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:13,285 DEBUG LogicalConnectionImpl:212 - Obtaining JDBC connection
03:57:13,285 DEBUG DriverManagerDataSource:162 - Creating new JDBC DriverManager Connection to [jdbc:mysql://127.0.0.1:3306/peuranie]
03:57:13,299 DEBUG LogicalConnectionImpl:218 - Obtained JDBC connection
03:57:13,300 DEBUG AbstractTransactionImpl:158 - begin
03:57:13,300 DEBUG JdbcTransaction:69 - initial autocommit status: true
03:57:13,300 DEBUG JdbcTransaction:71 - disabling autocommit
03:57:13,301 DEBUG HibernateTransactionManager:413 - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@57308da3]
03:57:13,302 DEBUG Loader:2105 - Loading entity: [tyovuoro.model.Role#3]
03:57:13,302 DEBUG SQL:104 - select role0_.id as id1_3_0_, role0_.role_name as role2_3_0_ from roles role0_ where role0_.id=?
03:57:13,303 DEBUG Loader:941 - Result set row: 0
03:57:13,304 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.Role#3]
03:57:13,304 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.Role#3]
03:57:13,305 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.Role#3]
03:57:13,305 DEBUG Loader:2129 - Done entity load
03:57:13,305 DEBUG HibernateTransactionManager:752 - Initiating transaction commit
03:57:13,305 DEBUG HibernateTransactionManager:476 - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:13,306 DEBUG AbstractTransactionImpl:173 - committing
03:57:13,306 DEBUG AbstractFlushingEventListener:144 - Processing flush-time cascades
03:57:13,306 DEBUG AbstractFlushingEventListener:185 - Dirty checking collections
03:57:13,306 DEBUG Collections:195 - Collection found: [tyovuoro.model.Role.userRoles#3], was: [tyovuoro.model.Role.userRoles#3] (uninitialized)
03:57:13,333 DEBUG AbstractFlushingEventListener:118 - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
03:57:13,333 DEBUG AbstractFlushingEventListener:125 - Flushed: 0 (re)creations, 0 updates, 0 removals to 1 collections
03:57:13,333 DEBUG EntityPrinter:114 - Listing entities:
03:57:13,334 DEBUG EntityPrinter:121 - tyovuoro.model.Role{id=3, userRoles=<uninitialized>, role_name=pharmacy}
03:57:13,335 DEBUG JdbcTransaction:113 - committed JDBC Connection
03:57:13,335 DEBUG JdbcTransaction:126 - re-enabling autocommit
03:57:13,336 DEBUG HibernateTransactionManager:564 - Not closing pre-bound Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction
03:57:13,336 DEBUG SessionImpl:566 - Disconnecting session
03:57:13,336 DEBUG LogicalConnectionImpl:232 - Releasing JDBC connection
03:57:13,337 DEBUG LogicalConnectionImpl:250 - Released JDBC connection
03:57:13,337 DEBUG PrePostAnnotationSecurityMetadataSource:98 - @org.springframework.security.access.prepost.PreAuthorize(value=hasRole('ROLE_ADMIN')) found on specific method: public void tyovuoro.service.UserServiceImpl.saveUser(tyovuoro.model.User)
03:57:13,338 DEBUG DelegatingMethodSecurityMetadataSource:65 - Caching method [CacheKey[tyovuoro.service.UserServiceImpl; public abstract void tyovuoro.service.UserService.saveUser(tyovuoro.model.User)]] with attributes [[authorize: 'hasRole('ROLE_ADMIN')', filter: 'null', filterTarget: 'null']]
03:57:13,338 DEBUG AnnotationTransactionAttributeSource:106 - Adding transactional method 'saveUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
03:57:13,338 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public abstract void tyovuoro.service.UserService.saveUser(tyovuoro.model.User); target is of class [tyovuoro.service.UserServiceImpl]; Attributes: [[authorize: 'hasRole('ROLE_ADMIN')', filter: 'null', filterTarget: 'null']]
03:57:13,338 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,338 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:13,339 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:13,339 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,339 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:13,339 DEBUG HibernateTransactionManager:290 - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:13,339 DEBUG HibernateTransactionManager:365 - Creating new transaction with name [tyovuoro.service.UserServiceImpl.saveUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
03:57:13,340 DEBUG HibernateTransactionManager:352 - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:13,383 DEBUG LogicalConnectionImpl:212 - Obtaining JDBC connection
03:57:13,383 DEBUG DriverManagerDataSource:162 - Creating new JDBC DriverManager Connection to [jdbc:mysql://127.0.0.1:3306/peuranie]
03:57:13,393 DEBUG LogicalConnectionImpl:218 - Obtained JDBC connection
03:57:13,394 DEBUG AbstractTransactionImpl:158 - begin
03:57:13,394 DEBUG JdbcTransaction:69 - initial autocommit status: true
03:57:13,394 DEBUG JdbcTransaction:71 - disabling autocommit
03:57:13,394 DEBUG HibernateTransactionManager:413 - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@532d8658]
03:57:13,404 DEBUG ActionQueue:213 - Executing identity-insert immediately
03:57:13,405 DEBUG SQL:104 - insert into users (address, email, firstname, lastname, password, username) values (?, ?, ?, ?, ?, ?)
03:57:13,409 DEBUG IdentifierGeneratorHelper:93 - Natively generated identity: 17
03:57:13,412 DEBUG SQL:104 - insert into user_roles (role_id, user_id) values (?, ?)
03:57:13,416 DEBUG HibernateTransactionManager:752 - Initiating transaction commit
03:57:13,416 DEBUG HibernateTransactionManager:476 - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:13,416 DEBUG AbstractTransactionImpl:173 - committing
03:57:13,417 DEBUG AbstractFlushingEventListener:144 - Processing flush-time cascades
03:57:13,417 DEBUG AbstractFlushingEventListener:185 - Dirty checking collections
03:57:13,417 DEBUG Collections:195 - Collection found: [tyovuoro.model.Role.userRoles#3], was: [tyovuoro.model.Role.userRoles#3] (uninitialized)
03:57:13,417 DEBUG AbstractFlushingEventListener:118 - Flushed: 0 insertions, 0 updates, 0 deletions to 2 objects
03:57:13,418 DEBUG AbstractFlushingEventListener:125 - Flushed: 0 (re)creations, 0 updates, 0 removals to 1 collections
03:57:13,418 DEBUG EntityPrinter:114 - Listing entities:
03:57:13,418 DEBUG EntityPrinter:121 - tyovuoro.model.User{id=17, username=apo, email=apo, address=apo, bannedPlaces=null, role=tyovuoro.model.Role#3, lastname=apo, orders=null, firstname=apo, password=77341482fd282f526d1921b3d4b7a770189d2dfdabf2ac77999fe25e2f93fbae2ab153e842520d07}
03:57:13,418 DEBUG EntityPrinter:121 - tyovuoro.model.Role{id=3, userRoles=<uninitialized>, role_name=pharmacy}
03:57:13,420 DEBUG JdbcTransaction:113 - committed JDBC Connection
03:57:13,420 DEBUG JdbcTransaction:126 - re-enabling autocommit
03:57:13,421 DEBUG HibernateTransactionManager:564 - Not closing pre-bound Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction
03:57:13,421 DEBUG SessionImpl:566 - Disconnecting session
03:57:13,422 DEBUG LogicalConnectionImpl:232 - Releasing JDBC connection
03:57:13,422 DEBUG LogicalConnectionImpl:250 - Released JDBC connection
03:57:13,422 DEBUG DefaultListableBeanFactory:1498 - Invoking afterPropertiesSet() on bean with name 'redirect:/user/'
03:57:13,423 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.security.methodSecurityMetadataSourceAdvisor'
03:57:13,423 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
03:57:13,423 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.RedirectView: name 'redirect:/user/'; URL [/user/]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:13,433 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:13,511 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:13,511 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:13,511 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:13,521 DEBUG FilterChainProxy:337 - /user/ at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:13,521 DEBUG HttpSessionSecurityContextRepository:158 - Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@bc9529f7: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:13,521 DEBUG FilterChainProxy:337 - /user/ at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:13,521 DEBUG FilterChainProxy:337 - /user/ at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:13,521 DEBUG FilterChainProxy:337 - /user/ at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:13,521 DEBUG FilterChainProxy:337 - /user/ at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:13,522 DEBUG FilterChainProxy:337 - /user/ at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:13,522 DEBUG FilterChainProxy:337 - /user/ at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:13,522 DEBUG AnonymousAuthenticationFilter:107 - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:13,522 DEBUG FilterChainProxy:337 - /user/ at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:13,522 DEBUG FilterChainProxy:337 - /user/ at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:13,522 DEBUG FilterChainProxy:337 - /user/ at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:13,522 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/user/'; against '/login'
03:57:13,522 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/user/'; against '/login-error'
03:57:13,522 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/user/'; against '/logout'
03:57:13,522 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/user/'; against '/resources/**'
03:57:13,523 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /user/; Attributes: [isAuthenticated()]
03:57:13,523 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,533 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:13,533 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:13,533 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:13,533 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:13,533 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,533 DEBUG FilterChainProxy:323 - /user/ reached end of additional filter chain; proceeding with original chain
03:57:13,534 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:13,534 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:13,534 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:13,538 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing GET request for [/tyovuorosovellus/user/]
03:57:13,538 DEBUG SessionFlashMapManager:91 - Retrieved FlashMap(s): [[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]]
03:57:13,538 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /user/
03:57:13,539 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.UserController.showUsers(org.springframework.ui.ModelMap)]
03:57:13,539 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'userController'
03:57:13,539 DEBUG DispatcherServlet:902 - Last-Modified value for [/tyovuorosovellus/user/] is: -1
03:57:13,540 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public java.lang.String tyovuoro.controller.UserController.showUsers(org.springframework.ui.ModelMap); target is of class [tyovuoro.controller.UserController]; Attributes: [[authorize: 'isAuthenticated()', filter: 'null', filterTarget: 'null']]
03:57:13,540 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,540 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:13,541 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:13,541 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,541 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public abstract tyovuoro.model.User tyovuoro.service.UserService.getUser(java.lang.String); target is of class [tyovuoro.service.UserServiceImpl]; Attributes: [[authorize: 'isAuthenticated()', filter: 'null', filterTarget: 'null']]
03:57:13,541 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:13,583 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:13,583 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:13,584 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:13,584 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:13,585 DEBUG HibernateTransactionManager:290 - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:13,585 DEBUG HibernateTransactionManager:365 - Creating new transaction with name [tyovuoro.service.UserServiceImpl.getUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
03:57:13,585 DEBUG HibernateTransactionManager:352 - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:13,586 DEBUG LogicalConnectionImpl:212 - Obtaining JDBC connection
03:57:13,586 DEBUG DriverManagerDataSource:162 - Creating new JDBC DriverManager Connection to [jdbc:mysql://127.0.0.1:3306/peuranie]
03:57:13,608 DEBUG LogicalConnectionImpl:218 - Obtained JDBC connection
03:57:13,608 DEBUG DataSourceUtils:153 - Setting JDBC Connection [com.mysql.jdbc.JDBC4Connection@63e14742] read-only
03:57:13,609 DEBUG AbstractTransactionImpl:158 - begin
03:57:13,609 DEBUG JdbcTransaction:69 - initial autocommit status: true
03:57:13,609 DEBUG JdbcTransaction:71 - disabling autocommit
03:57:13,610 DEBUG HibernateTransactionManager:413 - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@63e14742]
03:57:13,610 DEBUG SQL:104 - select user0_.id as id1_5_, user0_.address as address2_5_, user0_.email as email3_5_, user0_.firstname as firstnam4_5_, user0_.lastname as lastname5_5_, user0_.password as password6_5_, user0_.username as username7_5_, user0_1_.role_id as role1_4_ from users user0_ left outer join user_roles user0_1_ on user0_.id=user0_1_.user_id where user0_.username=?
03:57:13,611 DEBUG Loader:941 - Result set row: 0
03:57:13,612 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#1]
03:57:13,612 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#1]
03:57:13,612 DEBUG Loader:2105 - Loading entity: [tyovuoro.model.Role#1]
03:57:13,612 DEBUG SQL:104 - select role0_.id as id1_3_0_, role0_.role_name as role2_3_0_ from roles role0_ where role0_.id=?
03:57:13,614 DEBUG Loader:941 - Result set row: 0
03:57:13,614 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.Role#1]
03:57:13,615 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.Role#1]
03:57:13,615 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.Role#1]
03:57:13,615 DEBUG Loader:2129 - Done entity load
03:57:13,615 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#1]
03:57:13,616 DEBUG HibernateTransactionManager:752 - Initiating transaction commit
03:57:13,616 DEBUG HibernateTransactionManager:476 - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#1], EntityKey[tyovuoro.model.User#1]],collectionKeys=[CollectionKey[tyovuoro.model.User.bannedPlaces#1], CollectionKey[tyovuoro.model.Role.userRoles#1], CollectionKey[tyovuoro.model.User.orders#1]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:13,634 DEBUG AbstractTransactionImpl:173 - committing
03:57:13,635 DEBUG JdbcTransaction:113 - committed JDBC Connection
03:57:13,635 DEBUG JdbcTransaction:126 - re-enabling autocommit
03:57:13,636 DEBUG DataSourceUtils:222 - Resetting read-only flag of JDBC Connection [com.mysql.jdbc.JDBC4Connection@63e14742]
03:57:13,637 DEBUG HibernateTransactionManager:564 - Not closing pre-bound Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#1], EntityKey[tyovuoro.model.User#1]],collectionKeys=[CollectionKey[tyovuoro.model.User.bannedPlaces#1], CollectionKey[tyovuoro.model.Role.userRoles#1], CollectionKey[tyovuoro.model.User.orders#1]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction
03:57:13,637 DEBUG SessionImpl:566 - Disconnecting session
03:57:13,638 DEBUG LogicalConnectionImpl:232 - Releasing JDBC connection
03:57:13,638 DEBUG LogicalConnectionImpl:250 - Released JDBC connection
03:57:13,638 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'user/index'; URL [/WEB-INF/views/user/index.jsp]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:13,639 DEBUG JstlView:371 - Added model object 'org.springframework.validation.BindingResult.user' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'user/index'
03:57:13,639 DEBUG JstlView:371 - Added model object 'user' of type [tyovuoro.model.User] to request in view with name 'user/index'
03:57:13,639 DEBUG JstlView:236 - Forwarding to resource [/WEB-INF/views/user/index.jsp] in InternalResourceView 'user/index'
03:57:13,647 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:13,671 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:13,677 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:13,677 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:13,677 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:13,678 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:13,678 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:13,694 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:13,695 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:15,731 DEBUG FilterChainProxy:337 - /admin/user at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:15,732 DEBUG HttpSessionSecurityContextRepository:158 - Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@bc9529f7: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:15,732 DEBUG FilterChainProxy:337 - /admin/user at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:15,732 DEBUG FilterChainProxy:337 - /admin/user at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:15,732 DEBUG FilterChainProxy:337 - /admin/user at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:15,732 DEBUG FilterChainProxy:337 - /admin/user at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:15,732 DEBUG FilterChainProxy:337 - /admin/user at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:15,733 DEBUG FilterChainProxy:337 - /admin/user at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:15,733 DEBUG AnonymousAuthenticationFilter:107 - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:15,733 DEBUG FilterChainProxy:337 - /admin/user at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:15,733 DEBUG FilterChainProxy:337 - /admin/user at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:15,733 DEBUG FilterChainProxy:337 - /admin/user at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:15,734 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user'; against '/login'
03:57:15,734 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user'; against '/login-error'
03:57:15,734 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user'; against '/logout'
03:57:15,734 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/admin/user'; against '/resources/**'
03:57:15,735 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /admin/user; Attributes: [isAuthenticated()]
03:57:15,735 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:15,834 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:15,834 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:15,834 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:15,835 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:15,835 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:15,835 DEBUG FilterChainProxy:323 - /admin/user reached end of additional filter chain; proceeding with original chain
03:57:15,835 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:15,836 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:15,836 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:15,844 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing GET request for [/tyovuorosovellus/admin/user]
03:57:15,844 DEBUG SessionFlashMapManager:91 - Retrieved FlashMap(s): [[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]]
03:57:15,845 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /admin/user
03:57:15,845 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.UserController.adminShowUsers(org.springframework.ui.ModelMap)]
03:57:15,845 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'userController'
03:57:15,846 DEBUG DispatcherServlet:902 - Last-Modified value for [/tyovuorosovellus/admin/user] is: -1
03:57:15,846 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public java.lang.String tyovuoro.controller.UserController.adminShowUsers(org.springframework.ui.ModelMap); target is of class [tyovuoro.controller.UserController]; Attributes: [[authorize: 'hasRole('ROLE_ADMIN')', filter: 'null', filterTarget: 'null']]
03:57:15,847 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:15,847 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:15,847 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:15,848 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:15,848 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public abstract java.util.List tyovuoro.service.UserService.getAllUsers(); target is of class [tyovuoro.service.UserServiceImpl]; Attributes: [[authorize: 'hasRole('ROLE_ADMIN')', filter: 'null', filterTarget: 'null']]
03:57:15,848 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN
03:57:15,885 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:15,885 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:15,885 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:15,885 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:15,886 DEBUG HibernateTransactionManager:290 - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:15,886 DEBUG HibernateTransactionManager:365 - Creating new transaction with name [tyovuoro.service.UserServiceImpl.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
03:57:15,886 DEBUG HibernateTransactionManager:352 - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:15,886 DEBUG LogicalConnectionImpl:212 - Obtaining JDBC connection
03:57:15,886 DEBUG DriverManagerDataSource:162 - Creating new JDBC DriverManager Connection to [jdbc:mysql://127.0.0.1:3306/peuranie]
03:57:15,904 DEBUG LogicalConnectionImpl:218 - Obtained JDBC connection
03:57:15,904 DEBUG DataSourceUtils:153 - Setting JDBC Connection [com.mysql.jdbc.JDBC4Connection@7893e638] read-only
03:57:15,905 DEBUG AbstractTransactionImpl:158 - begin
03:57:15,906 DEBUG JdbcTransaction:69 - initial autocommit status: true
03:57:15,906 DEBUG JdbcTransaction:71 - disabling autocommit
03:57:15,907 DEBUG HibernateTransactionManager:413 - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@7893e638]
03:57:15,907 DEBUG SQL:104 - select user0_.id as id1_5_, user0_.address as address2_5_, user0_.email as email3_5_, user0_.firstname as firstnam4_5_, user0_.lastname as lastname5_5_, user0_.password as password6_5_, user0_.username as username7_5_, user0_1_.role_id as role1_4_ from users user0_ left outer join user_roles user0_1_ on user0_.id=user0_1_.user_id order by user0_.lastname
03:57:15,909 DEBUG Loader:941 - Result set row: 0
03:57:15,910 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#15]
03:57:15,910 DEBUG Loader:941 - Result set row: 1
03:57:15,911 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#17]
03:57:15,911 DEBUG Loader:941 - Result set row: 2
03:57:15,912 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#1]
03:57:15,912 DEBUG Loader:941 - Result set row: 3
03:57:15,913 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#12]
03:57:15,913 DEBUG Loader:941 - Result set row: 4
03:57:15,914 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#16]
03:57:15,914 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#15]
03:57:15,915 DEBUG Loader:2105 - Loading entity: [tyovuoro.model.Role#1]
03:57:15,915 DEBUG SQL:104 - select role0_.id as id1_3_0_, role0_.role_name as role2_3_0_ from roles role0_ where role0_.id=?
03:57:15,917 DEBUG Loader:941 - Result set row: 0
03:57:15,918 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.Role#1]
03:57:15,918 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.Role#1]
03:57:15,935 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.Role#1]
03:57:15,935 DEBUG Loader:2129 - Done entity load
03:57:15,935 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#15]
03:57:15,936 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#17]
03:57:15,936 DEBUG Loader:2105 - Loading entity: [tyovuoro.model.Role#3]
03:57:15,936 DEBUG SQL:104 - select role0_.id as id1_3_0_, role0_.role_name as role2_3_0_ from roles role0_ where role0_.id=?
03:57:15,938 DEBUG Loader:941 - Result set row: 0
03:57:15,938 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.Role#3]
03:57:15,938 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.Role#3]
03:57:15,939 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.Role#3]
03:57:15,939 DEBUG Loader:2129 - Done entity load
03:57:15,939 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#17]
03:57:15,940 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#1]
03:57:15,940 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#1]
03:57:15,940 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#12]
03:57:15,940 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#12]
03:57:15,941 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#16]
03:57:15,941 DEBUG Loader:2105 - Loading entity: [tyovuoro.model.Role#2]
03:57:15,941 DEBUG SQL:104 - select role0_.id as id1_3_0_, role0_.role_name as role2_3_0_ from roles role0_ where role0_.id=?
03:57:15,942 DEBUG Loader:941 - Result set row: 0
03:57:15,943 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.Role#2]
03:57:15,943 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.Role#2]
03:57:15,943 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.Role#2]
03:57:15,944 DEBUG Loader:2129 - Done entity load
03:57:15,944 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#16]
03:57:15,944 DEBUG HibernateTransactionManager:752 - Initiating transaction commit
03:57:15,945 DEBUG HibernateTransactionManager:476 - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#2], EntityKey[tyovuoro.model.User#1], EntityKey[tyovuoro.model.Role#1], EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3], EntityKey[tyovuoro.model.User#16], EntityKey[tyovuoro.model.User#12], EntityKey[tyovuoro.model.User#15]],collectionKeys=[CollectionKey[tyovuoro.model.User.bannedPlaces#1], CollectionKey[tyovuoro.model.User.orders#12], CollectionKey[tyovuoro.model.User.orders#1], CollectionKey[tyovuoro.model.Role.userRoles#2], CollectionKey[tyovuoro.model.User.bannedPlaces#16], CollectionKey[tyovuoro.model.User.bannedPlaces#17], CollectionKey[tyovuoro.model.Role.userRoles#1], CollectionKey[tyovuoro.model.Role.userRoles#3], CollectionKey[tyovuoro.model.User.bannedPlaces#15], CollectionKey[tyovuoro.model.User.bannedPlaces#12], CollectionKey[tyovuoro.model.User.orders#17], CollectionKey[tyovuoro.model.User.orders#15], CollectionKey[tyovuoro.model.User.orders#16]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:15,945 DEBUG AbstractTransactionImpl:173 - committing
03:57:15,945 DEBUG JdbcTransaction:113 - committed JDBC Connection
03:57:15,946 DEBUG JdbcTransaction:126 - re-enabling autocommit
03:57:15,947 DEBUG DataSourceUtils:222 - Resetting read-only flag of JDBC Connection [com.mysql.jdbc.JDBC4Connection@7893e638]
03:57:15,947 DEBUG HibernateTransactionManager:564 - Not closing pre-bound Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.Role#2], EntityKey[tyovuoro.model.User#1], EntityKey[tyovuoro.model.Role#1], EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3], EntityKey[tyovuoro.model.User#16], EntityKey[tyovuoro.model.User#12], EntityKey[tyovuoro.model.User#15]],collectionKeys=[CollectionKey[tyovuoro.model.User.bannedPlaces#1], CollectionKey[tyovuoro.model.User.orders#12], CollectionKey[tyovuoro.model.User.orders#1], CollectionKey[tyovuoro.model.Role.userRoles#2], CollectionKey[tyovuoro.model.User.bannedPlaces#16], CollectionKey[tyovuoro.model.User.bannedPlaces#17], CollectionKey[tyovuoro.model.Role.userRoles#1], CollectionKey[tyovuoro.model.Role.userRoles#3], CollectionKey[tyovuoro.model.User.bannedPlaces#15], CollectionKey[tyovuoro.model.User.bannedPlaces#12], CollectionKey[tyovuoro.model.User.orders#17], CollectionKey[tyovuoro.model.User.orders#15], CollectionKey[tyovuoro.model.User.orders#16]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction
03:57:15,986 DEBUG SessionImpl:566 - Disconnecting session
03:57:15,986 DEBUG LogicalConnectionImpl:232 - Releasing JDBC connection
03:57:15,987 DEBUG LogicalConnectionImpl:250 - Released JDBC connection
03:57:15,988 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'admin/users/index'; URL [/WEB-INF/views/admin/users/index.jsp]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:15,988 DEBUG JstlView:371 - Added model object 'userList' of type [java.util.ArrayList] to request in view with name 'admin/users/index'
03:57:15,989 DEBUG JstlView:236 - Forwarding to resource [/WEB-INF/views/admin/users/index.jsp] in InternalResourceView 'admin/users/index'
03:57:16,010 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:16,055 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:16,064 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:16,065 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:16,065 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:16,065 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:16,066 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ADMIN] one can reach [ROLE_ADMIN, ROLE_USER, ROLE_PHARMACY] in zero or more steps.
03:57:16,085 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:16,085 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:18,730 DEBUG FilterChainProxy:337 - /j_spring_security_logout at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:18,731 DEBUG HttpSessionSecurityContextRepository:158 - Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@bc9529f7: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN'
03:57:18,731 DEBUG FilterChainProxy:337 - /j_spring_security_logout at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:18,731 DEBUG LogoutFilter:93 - Logging out user 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bc9529f7: Principal: org.springframework.security.core.userdetails.User@3c8792d: Username: Apina; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffe9938: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A7BCD5A76D437BC24C1DEA4A8EBA3040; Granted Authorities: ROLE_ADMIN' and transferring to logout destination
03:57:18,731 DEBUG SecurityContextLogoutHandler:62 - Invalidating session: 85AEC7FFA8A7D9D2E44F1EDBE63196EF
03:57:18,732 DEBUG SimpleUrlLogoutSuccessHandler:107 - Using default Url: /logout
03:57:18,732 DEBUG DefaultRedirectStrategy:36 - Redirecting to '/tyovuorosovellus/logout'
03:57:18,732 DEBUG HttpSessionSecurityContextRepository:269 - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
03:57:18,732 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:18,748 DEBUG FilterChainProxy:337 - /logout at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:18,748 DEBUG HttpSessionSecurityContextRepository:127 - No HttpSession currently exists
03:57:18,748 DEBUG HttpSessionSecurityContextRepository:85 - No SecurityContext was available from the HttpSession: null. A new one will be created.
03:57:18,748 DEBUG FilterChainProxy:337 - /logout at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:18,748 DEBUG FilterChainProxy:337 - /logout at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:18,748 DEBUG FilterChainProxy:337 - /logout at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:18,748 DEBUG FilterChainProxy:337 - /logout at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:18,749 DEBUG FilterChainProxy:337 - /logout at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:18,749 DEBUG FilterChainProxy:337 - /logout at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:18,749 DEBUG AnonymousAuthenticationFilter:102 - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
03:57:18,749 DEBUG FilterChainProxy:337 - /logout at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:18,887 DEBUG SessionManagementFilter:92 - Requested session ID 85AEC7FFA8A7D9D2E44F1EDBE63196EF is invalid.
03:57:18,887 DEBUG FilterChainProxy:337 - /logout at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:18,887 DEBUG FilterChainProxy:337 - /logout at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:18,887 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/logout'; against '/login'
03:57:18,888 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/logout'; against '/login-error'
03:57:18,888 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/logout'; against '/logout'
03:57:18,888 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /logout; Attributes: [permitAll]
03:57:18,888 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
03:57:18,889 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ANONYMOUS] one can reach [ROLE_ANONYMOUS] in zero or more steps.
03:57:18,889 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:18,889 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:18,889 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:18,890 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:18,890 DEBUG FilterChainProxy:323 - /logout reached end of additional filter chain; proceeding with original chain
03:57:18,890 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:18,891 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:18,891 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:18,899 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing GET request for [/tyovuorosovellus/logout]
03:57:18,899 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /logout
03:57:18,900 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.SecurityController.logout(org.springframework.web.servlet.mvc.support.RedirectAttributes)]
03:57:18,900 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'securityController'
03:57:18,900 DEBUG DispatcherServlet:902 - Last-Modified value for [/tyovuorosovellus/logout] is: -1
03:57:18,901 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.RedirectView: name 'redirect:/login/'; URL [/login/]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:18,902 DEBUG SessionFlashMapManager:187 - Saving FlashMap=[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]
03:57:18,902 DEBUG HttpSessionSecurityContextRepository:269 - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
03:57:18,903 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:18,929 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:18,929 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:18,929 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:18,939 DEBUG FilterChainProxy:337 - /login/ at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:18,939 DEBUG HttpSessionSecurityContextRepository:139 - HttpSession returned null object for SPRING_SECURITY_CONTEXT
03:57:18,939 DEBUG HttpSessionSecurityContextRepository:85 - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@386315ad. A new one will be created.
03:57:18,939 DEBUG FilterChainProxy:337 - /login/ at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:18,939 DEBUG FilterChainProxy:337 - /login/ at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:18,940 DEBUG AnonymousAuthenticationFilter:102 - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9057bc48: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_ANONYMOUS'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:18,940 DEBUG FilterChainProxy:337 - /login/ at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:18,941 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/login/'; against '/login'
03:57:18,941 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/login/'; against '/login-error'
03:57:18,941 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/login/'; against '/logout'
03:57:18,941 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/login/'; against '/resources/**'
03:57:18,941 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /login/; Attributes: [isAuthenticated()]
03:57:18,941 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9057bc48: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_ANONYMOUS
03:57:18,941 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ANONYMOUS] one can reach [ROLE_ANONYMOUS] in zero or more steps.
03:57:18,941 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:18,942 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: -1
03:57:18,942 DEBUG ExceptionTranslationFilter:165 - Access is denied (user is anonymous); redirecting to authentication entry point
org.springframework.security.access.AccessDeniedException: Access is denied
	at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
	at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:722)
03:57:18,987 DEBUG HttpSessionRequestCache:41 - DefaultSavedRequest added to Session: DefaultSavedRequest[http://localhost:8084/tyovuorosovellus/login/]
03:57:18,987 DEBUG ExceptionTranslationFilter:185 - Calling Authentication entry point.
03:57:18,987 DEBUG DefaultRedirectStrategy:36 - Redirecting to 'http://localhost:8084/tyovuorosovellus/login'
03:57:18,988 DEBUG HttpSessionSecurityContextRepository:269 - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
03:57:18,988 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:18,994 DEBUG FilterChainProxy:337 - /login at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:18,994 DEBUG HttpSessionSecurityContextRepository:139 - HttpSession returned null object for SPRING_SECURITY_CONTEXT
03:57:18,994 DEBUG HttpSessionSecurityContextRepository:85 - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@386315ad. A new one will be created.
03:57:18,994 DEBUG FilterChainProxy:337 - /login at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:18,995 DEBUG FilterChainProxy:337 - /login at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:18,995 DEBUG FilterChainProxy:337 - /login at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:18,995 DEBUG FilterChainProxy:337 - /login at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:18,995 DEBUG DefaultSavedRequest:309 - pathInfo: both null (property equals)
03:57:18,995 DEBUG DefaultSavedRequest:309 - queryString: both null (property equals)
03:57:18,995 DEBUG DefaultSavedRequest:331 - requestURI: arg1=/tyovuorosovellus/login/; arg2=/tyovuorosovellus/login (property not equals)
03:57:18,995 DEBUG HttpSessionRequestCache:75 - saved request doesn't match
03:57:18,995 DEBUG FilterChainProxy:337 - /login at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:18,995 DEBUG FilterChainProxy:337 - /login at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:18,995 DEBUG AnonymousAuthenticationFilter:102 - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9057bc48: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_ANONYMOUS'
03:57:18,995 DEBUG FilterChainProxy:337 - /login at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:18,996 DEBUG FilterChainProxy:337 - /login at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:18,996 DEBUG FilterChainProxy:337 - /login at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:18,996 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/login'; against '/login'
03:57:18,996 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /login; Attributes: [permitAll]
03:57:18,996 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9057bc48: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_ANONYMOUS
03:57:18,996 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ANONYMOUS] one can reach [ROLE_ANONYMOUS] in zero or more steps.
03:57:18,996 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:19,274 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:19,274 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:19,274 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:19,274 DEBUG FilterChainProxy:323 - /login reached end of additional filter chain; proceeding with original chain
03:57:19,274 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:19,275 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:19,275 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:19,278 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing GET request for [/tyovuorosovellus/login]
03:57:19,279 DEBUG SessionFlashMapManager:91 - Retrieved FlashMap(s): [[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]]
03:57:19,279 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /login
03:57:19,279 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.SecurityController.login(org.springframework.ui.ModelMap)]
03:57:19,279 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'securityController'
03:57:19,279 DEBUG DispatcherServlet:902 - Last-Modified value for [/tyovuorosovellus/login] is: -1
03:57:19,280 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'login/login'; URL [/WEB-INF/views/login/login.jsp]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:19,280 DEBUG JstlView:236 - Forwarding to resource [/WEB-INF/views/login/login.jsp] in InternalResourceView 'login/login'
03:57:19,286 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:19,310 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:19,316 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:19,317 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ANONYMOUS] one can reach [ROLE_ANONYMOUS] in zero or more steps.
03:57:19,317 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:19,317 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:19,318 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_ANONYMOUS] one can reach [ROLE_ANONYMOUS] in zero or more steps.
03:57:19,336 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:19,337 DEBUG HttpSessionSecurityContextRepository:269 - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
03:57:19,337 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:22,108 DEBUG FilterChainProxy:337 - /do_login at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:22,108 DEBUG HttpSessionSecurityContextRepository:139 - HttpSession returned null object for SPRING_SECURITY_CONTEXT
03:57:22,108 DEBUG HttpSessionSecurityContextRepository:85 - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@386315ad. A new one will be created.
03:57:22,108 DEBUG FilterChainProxy:337 - /do_login at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:22,108 DEBUG FilterChainProxy:337 - /do_login at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:22,108 DEBUG UsernamePasswordAuthenticationFilter:189 - Request is to process authentication
03:57:22,109 DEBUG ProviderManager:152 - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
03:57:22,109 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:22,109 DEBUG HibernateTransactionManager:365 - Creating new transaction with name [tyovuoro.service.CustomUserDetailsService.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
03:57:22,109 DEBUG HibernateTransactionManager:342 - Opened new Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:22,109 DEBUG HibernateTransactionManager:352 - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:22,109 DEBUG LogicalConnectionImpl:212 - Obtaining JDBC connection
03:57:22,109 DEBUG DriverManagerDataSource:162 - Creating new JDBC DriverManager Connection to [jdbc:mysql://127.0.0.1:3306/peuranie]
03:57:22,120 DEBUG LogicalConnectionImpl:218 - Obtained JDBC connection
03:57:22,120 DEBUG DataSourceUtils:153 - Setting JDBC Connection [com.mysql.jdbc.JDBC4Connection@42cd48e3] read-only
03:57:22,120 DEBUG AbstractTransactionImpl:158 - begin
03:57:22,121 DEBUG JdbcTransaction:69 - initial autocommit status: true
03:57:22,121 DEBUG JdbcTransaction:71 - disabling autocommit
03:57:22,121 DEBUG HibernateTransactionManager:413 - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@42cd48e3]
03:57:22,121 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:22,121 DEBUG HibernateTransactionManager:290 - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:22,121 DEBUG HibernateTransactionManager:470 - Participating in existing transaction
03:57:22,122 DEBUG SQL:104 - select user0_.id as id1_5_, user0_.address as address2_5_, user0_.email as email3_5_, user0_.firstname as firstnam4_5_, user0_.lastname as lastname5_5_, user0_.password as password6_5_, user0_.username as username7_5_, user0_1_.role_id as role1_4_ from users user0_ left outer join user_roles user0_1_ on user0_.id=user0_1_.user_id where user0_.username=?
03:57:22,175 DEBUG Loader:941 - Result set row: 0
03:57:22,176 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.User#17]
03:57:22,176 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.User#17]
03:57:22,176 DEBUG Loader:2105 - Loading entity: [tyovuoro.model.Role#3]
03:57:22,177 DEBUG SQL:104 - select role0_.id as id1_3_0_, role0_.role_name as role2_3_0_ from roles role0_ where role0_.id=?
03:57:22,178 DEBUG Loader:941 - Result set row: 0
03:57:22,178 DEBUG Loader:1475 - Result row: EntityKey[tyovuoro.model.Role#3]
03:57:22,178 DEBUG TwoPhaseLoad:158 - Resolving associations for [tyovuoro.model.Role#3]
03:57:22,179 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.Role#3]
03:57:22,179 DEBUG Loader:2129 - Done entity load
03:57:22,179 DEBUG TwoPhaseLoad:277 - Done materializing entity [tyovuoro.model.User#17]
03:57:22,179 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'transactionManager'
03:57:22,179 DEBUG HibernateTransactionManager:290 - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.User.orders#17], CollectionKey[tyovuoro.model.User.bannedPlaces#17], CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
03:57:22,179 DEBUG HibernateTransactionManager:470 - Participating in existing transaction
03:57:22,180 DEBUG HibernateTransactionManager:752 - Initiating transaction commit
03:57:22,180 DEBUG HibernateTransactionManager:476 - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.User.orders#17], CollectionKey[tyovuoro.model.User.bannedPlaces#17], CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
03:57:22,180 DEBUG AbstractTransactionImpl:173 - committing
03:57:22,180 DEBUG JdbcTransaction:113 - committed JDBC Connection
03:57:22,180 DEBUG JdbcTransaction:126 - re-enabling autocommit
03:57:22,181 DEBUG DataSourceUtils:222 - Resetting read-only flag of JDBC Connection [com.mysql.jdbc.JDBC4Connection@42cd48e3]
03:57:22,182 DEBUG HibernateTransactionManager:558 - Closing Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[EntityKey[tyovuoro.model.User#17], EntityKey[tyovuoro.model.Role#3]],collectionKeys=[CollectionKey[tyovuoro.model.User.orders#17], CollectionKey[tyovuoro.model.User.bannedPlaces#17], CollectionKey[tyovuoro.model.Role.userRoles#3]]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] collectionQueuedOps=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction
03:57:22,182 DEBUG LogicalConnectionImpl:232 - Releasing JDBC connection
03:57:22,182 DEBUG LogicalConnectionImpl:250 - Released JDBC connection
03:57:22,186 DEBUG SessionFixationProtectionStrategy:88 - Invalidating session with Id 'C485F82C3A88762D9DE646BC8C563C78' and migrating attributes.
03:57:22,186 DEBUG SessionFixationProtectionStrategy:98 - Started new session: 2F8B3403D8FA64344C2DA9D2FD8645D1
03:57:22,187 DEBUG UsernamePasswordAuthenticationFilter:317 - Authentication success. Updating SecurityContextHolder to contain: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY
03:57:22,224 DEBUG HttpSessionRequestCache:62 - Removing DefaultSavedRequest from session if present
03:57:22,224 DEBUG DefaultRedirectStrategy:36 - Redirecting to '/tyovuorosovellus/'
03:57:22,224 DEBUG HttpSessionSecurityContextRepository:292 - SecurityContext stored to HttpSession: 'org.springframework.security.core.context.SecurityContextImpl@5e6d5a28: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY'
03:57:22,224 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:22,229 DEBUG FilterChainProxy:337 - / at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:22,229 DEBUG HttpSessionSecurityContextRepository:158 - Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@5e6d5a28: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY'
03:57:22,229 DEBUG FilterChainProxy:337 - / at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:22,229 DEBUG FilterChainProxy:337 - / at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:22,229 DEBUG FilterChainProxy:337 - / at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:22,229 DEBUG FilterChainProxy:337 - / at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:22,230 DEBUG FilterChainProxy:337 - / at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:22,230 DEBUG FilterChainProxy:337 - / at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:22,230 DEBUG AnonymousAuthenticationFilter:107 - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY'
03:57:22,230 DEBUG FilterChainProxy:337 - / at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:22,230 DEBUG FilterChainProxy:337 - / at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:22,230 DEBUG FilterChainProxy:337 - / at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:22,230 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/login'
03:57:22,230 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/login-error'
03:57:22,274 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/logout'
03:57:22,274 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/resources/**'
03:57:22,274 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /; Attributes: [isAuthenticated()]
03:57:22,274 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY
03:57:22,274 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,274 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:22,275 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:22,275 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:22,275 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:22,275 DEBUG FilterChainProxy:323 - / reached end of additional filter chain; proceeding with original chain
03:57:22,275 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:22,275 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:22,275 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:22,281 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing GET request for [/tyovuorosovellus/]
03:57:22,282 DEBUG SessionFlashMapManager:91 - Retrieved FlashMap(s): [[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]]
03:57:22,282 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /
03:57:22,283 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.StaticPagesController.showHomePage(org.springframework.ui.ModelMap)]
03:57:22,283 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'staticPagesController'
03:57:22,283 DEBUG DispatcherServlet:902 - Last-Modified value for [/tyovuorosovellus/] is: -1
03:57:22,284 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public java.lang.String tyovuoro.controller.StaticPagesController.showHomePage(org.springframework.ui.ModelMap); target is of class [tyovuoro.controller.StaticPagesController]; Attributes: [[authorize: 'isAuthenticated()', filter: 'null', filterTarget: 'null']]
03:57:22,284 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY
03:57:22,285 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:22,285 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:22,324 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:22,324 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'static/home'; URL [/WEB-INF/views/static/home.jsp]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:22,325 DEBUG JstlView:371 - Added model object 'role' of type [java.lang.String] to request in view with name 'static/home'
03:57:22,325 DEBUG JstlView:371 - Added model object 'username' of type [java.lang.String] to request in view with name 'static/home'
03:57:22,325 DEBUG JstlView:236 - Forwarding to resource [/WEB-INF/views/static/home.jsp] in InternalResourceView 'static/home'
03:57:22,329 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,330 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,330 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,330 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,330 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,331 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,331 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,331 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,333 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:22,361 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:22,367 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,368 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,368 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,368 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:22,369 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:22,389 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:22,389 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:33,012 DEBUG FilterChainProxy:337 - / at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
03:57:33,012 DEBUG HttpSessionSecurityContextRepository:158 - Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@5e6d5a28: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY'
03:57:33,012 DEBUG FilterChainProxy:337 - / at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
03:57:33,013 DEBUG FilterChainProxy:337 - / at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
03:57:33,013 DEBUG FilterChainProxy:337 - / at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
03:57:33,013 DEBUG FilterChainProxy:337 - / at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
03:57:33,013 DEBUG FilterChainProxy:337 - / at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
03:57:33,013 DEBUG FilterChainProxy:337 - / at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
03:57:33,014 DEBUG AnonymousAuthenticationFilter:107 - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY'
03:57:33,014 DEBUG FilterChainProxy:337 - / at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
03:57:33,014 DEBUG FilterChainProxy:337 - / at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
03:57:33,014 DEBUG FilterChainProxy:337 - / at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
03:57:33,014 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/login'
03:57:33,015 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/login-error'
03:57:33,015 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/logout'
03:57:33,015 DEBUG AntPathRequestMatcher:103 - Checking match of request : '/'; against '/resources/**'
03:57:33,015 DEBUG FilterSecurityInterceptor:194 - Secure object: FilterInvocation: URL: /; Attributes: [isAuthenticated()]
03:57:33,016 DEBUG FilterSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY
03:57:33,016 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,225 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleHierarchyVoter@33884f99, returned: 0
03:57:33,225 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@16781aaa, returned: 1
03:57:33,225 DEBUG FilterSecurityInterceptor:215 - Authorization successful
03:57:33,226 DEBUG FilterSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:33,226 DEBUG FilterChainProxy:323 - / reached end of additional filter chain; proceeding with original chain
03:57:33,226 DEBUG OpenSessionInViewFilter:153 - Using SessionFactory 'sessionFactory' for OpenSessionInViewFilter
03:57:33,227 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'sessionFactory'
03:57:33,227 DEBUG OpenSessionInViewFilter:113 - Opening Hibernate Session in OpenSessionInViewFilter
03:57:33,234 DEBUG DispatcherServlet:819 - DispatcherServlet with name 'Tyovuoro-servlet' processing GET request for [/tyovuorosovellus/]
03:57:33,235 DEBUG SessionFlashMapManager:91 - Retrieved FlashMap(s): [[Attributes={message=Kirjauduit ulos!}, targetRequestPath=/tyovuorosovellus/login/, targetRequestParams={}]]
03:57:33,235 DEBUG RequestMappingHandlerMapping:209 - Looking up handler method for path /
03:57:33,235 DEBUG RequestMappingHandlerMapping:216 - Returning handler method [public java.lang.String tyovuoro.controller.StaticPagesController.showHomePage(org.springframework.ui.ModelMap)]
03:57:33,236 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'staticPagesController'
03:57:33,236 DEBUG DispatcherServlet:902 - Last-Modified value for [/tyovuorosovellus/] is: -1
03:57:33,237 DEBUG MethodSecurityInterceptor:194 - Secure object: ReflectiveMethodInvocation: public java.lang.String tyovuoro.controller.StaticPagesController.showHomePage(org.springframework.ui.ModelMap); target is of class [tyovuoro.controller.StaticPagesController]; Attributes: [[authorize: 'isAuthenticated()', filter: 'null', filterTarget: 'null']]
03:57:33,237 DEBUG MethodSecurityInterceptor:310 - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@5e6d5a28: Principal: org.springframework.security.core.userdetails.User@17a20: Username: apo; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHARMACY; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@2cd90: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: C485F82C3A88762D9DE646BC8C563C78; Granted Authorities: ROLE_PHARMACY
03:57:33,237 DEBUG AffirmativeBased:65 - Voter: org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter@418fc854, returned: 1
03:57:33,238 DEBUG MethodSecurityInterceptor:215 - Authorization successful
03:57:33,238 DEBUG MethodSecurityInterceptor:227 - RunAsManager did not change Authentication object
03:57:33,239 DEBUG DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'static/home'; URL [/WEB-INF/views/static/home.jsp]] in DispatcherServlet with name 'Tyovuoro-servlet'
03:57:33,239 DEBUG JstlView:371 - Added model object 'role' of type [java.lang.String] to request in view with name 'static/home'
03:57:33,239 DEBUG JstlView:371 - Added model object 'username' of type [java.lang.String] to request in view with name 'static/home'
03:57:33,240 DEBUG JstlView:236 - Forwarding to resource [/WEB-INF/views/static/home.jsp] in InternalResourceView 'static/home'
03:57:33,247 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,248 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,248 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,276 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,276 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,277 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,277 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,277 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,279 DEBUG DispatcherServlet:913 - Successfully completed request
03:57:33,304 DEBUG OpenSessionInViewFilter:126 - Closing Hibernate Session in OpenSessionInViewFilter
03:57:33,309 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,310 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,310 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,310 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'defExpressionHandler'
03:57:33,310 DEBUG RoleHierarchyImpl:117 - getReachableGrantedAuthorities() - From the roles [ROLE_PHARMACY] one can reach [ROLE_PHARMACY] in zero or more steps.
03:57:33,328 DEBUG ExceptionTranslationFilter:115 - Chain processed normally
03:57:33,328 DEBUG SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
03:57:41,191  INFO XmlWebApplicationContext:1032 - Closing WebApplicationContext for namespace 'Tyovuoro-servlet-servlet': startup date [Fri Nov 22 03:56:03 EET 2013]; parent: Root WebApplicationContext
03:57:41,192 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'lifecycleProcessor'
03:57:41,192  INFO DefaultListableBeanFactory:434 - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@253d8693: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler#0,org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor#0,org.springframework.security.methodSecurityMetadataSourceAdvisor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,orderController,placeController,securityController,staticPagesController,userController,orderDAOImpl,placeDAOImpl,roleDAOImpl,userDAOImpl,customUserDetailsService,orderServiceImpl,placeServiceImpl,roleServiceImpl,userServiceImpl,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@78ef2f34
03:57:41,203 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#14': [org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0]
03:57:41,205 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#7': [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0]
03:57:41,206 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#6': [org.springframework.web.servlet.handler.MappedInterceptor#0]
03:57:41,208 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#4': [org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor#0]
03:57:41,208 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#5': [(inner bean)#5]
03:57:41,208 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#1': [(inner bean)#1, org.springframework.security.access.vote.AffirmativeBased#0]
03:57:41,209 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)': [(inner bean), org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource#0]
03:57:41,492  INFO XmlWebApplicationContext:1032 - Closing Root WebApplicationContext: startup date [Fri Nov 22 03:56:00 EET 2013]; root of context hierarchy
03:57:41,493 DEBUG DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'lifecycleProcessor'
03:57:41,493  INFO DefaultListableBeanFactory:434 - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@78ef2f34: defining beans [org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource,sessionFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,orderController,placeController,securityController,staticPagesController,userController,orderDAOImpl,placeDAOImpl,roleDAOImpl,userDAOImpl,customUserDetailsService,orderServiceImpl,placeServiceImpl,roleServiceImpl,userServiceImpl,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,transactionManager,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.web.PortResolverImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0,passwordEncoder,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,defExpressionHandler,roleVoter,roleHierarchy,accessDecisionManager,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
03:57:41,494 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name 'org.springframework.security.filterChainProxy'
03:57:41,494 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#25': [org.springframework.security.filterChainProxy]
03:57:41,495 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name 'org.springframework.security.filterChains'
03:57:41,495 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)': [org.springframework.security.web.DefaultSecurityFilterChain#0]
03:57:41,495 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#1'
03:57:41,495 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#2': [(inner bean)#2]
03:57:41,496 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#2'
03:57:41,496 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#6'
03:57:41,496 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#7'
03:57:41,496 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#8'
03:57:41,526 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#9'
03:57:41,526 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#10': [(inner bean)#10]
03:57:41,526 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#10'
03:57:41,527 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#11': [(inner bean)#11]
03:57:41,527 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name '(inner bean)#11'
03:57:41,527 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#13': [(inner bean)#13, org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0]
03:57:41,529 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean 'org.springframework.security.web.access.expression.WebExpressionVoter#497c32dc': [accessDecisionManager]
03:57:41,530 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0'
03:57:41,530 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#3': [org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0]
03:57:41,530 DEBUG DefaultListableBeanFactory:490 - Retrieved dependent beans for bean '(inner bean)#5': [org.springframework.security.authentication.ProviderManager#0]
03:57:41,532 DEBUG DisposableBeanAdapter:199 - Invoking destroy() on bean with name 'sessionFactory'
03:57:41,532 DEBUG SessionFactoryImpl:1369 - HHH000031: Closing
